/*!
 * @cnwhy/base64  v0.2.2
 * Homepage https://github.com/cnwhy/Base64.js#readme
 * License MIT
 */

const t=Array.isArray||function(t){Object.prototype.toString.call(t)},r="function"==typeof ArrayBuffer,e=r?ArrayBuffer:function(){},n=r?Uint8Array:Array,o=r?function(t){return new Uint8Array(t)}:function(t){return"number"==typeof t?new Array(t):t},i="ï¿½";function f(t){if(t<128)return[t];let r=11;for(;t>=Math.pow(2,r);)r+=5;let e=Math.ceil(r/6),n=new Array(e),o=0;for(n[0]=255^Math.pow(2,8-e)-1|t>>6*(e-1);o<e-1;)n[e-1-o]=128|t>>6*o&63,o++;return n}function l(t){let r=[],e=[];for(let r=0;r<t.length;r++){let n,o=t.charCodeAt(r);o<55296||o>57343?e.push(o):o<56320&&(n=t.charCodeAt(r+1))>=56320&&n<57344?(r++,e.push(65536+((1023&o)<<10|1023&n))):e.push(o)}for(let t=0;t<e.length;t++){let n=e[t];r.push.apply(r,f(n))}return o(r)}function a(r){let f,l="",a=0;if(r instanceof n)f=r;else{if(!(r instanceof e||t(r)))return String(r);f=o(r)}function h(t){let r=t,e=f[r++];try{if(e<128)return l+=String.fromCharCode(e),r;if(e<194||e>253)throw"code err";{let t=128,n=6,o=[],i=0;for(;e>=(t|Math.pow(2,n));){let e=f[r++];if(192&e^128)throw"code err";o.push(e),t|=Math.pow(2,n),n--}o=o.reverse();for(let t=0;t<o.length;t++){i|=(63&o[t])<<6*t}if((i|=(e&Math.pow(2,n)-1)<<6*o.length)>65535){let t=i-65536;l+=String.fromCharCode(55296|t>>10),l+=String.fromCharCode(56320|1023&t)}else l+=String.fromCharCode(65535&i);return r}}catch(r){return l+=i,t+1}}for(;a<f.length;)a=h(a);return l}const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="=";function u(t,r){let e=String(t||c);if(1!==e.length)throw new TypeError("The apd must be char");if(~r.join("").indexOf(e))throw new TypeError("The table as _pad");return e}function s(r){let e;if("string"==typeof(r=r||h))e=r.split("");else{if(!t(r))throw new TypeError('The "table" must be Array or a String.');e=Array.prototype.slice.call(r,0)}return function(t){if(t.length<64)throw new TypeError('The length of "table" is not 64!');for(let r=0;r<64;r++){let e=t[r];if(1!=e.length)throw new TypeError(`table item "${e}" must be a single character`);for(let n=r+1;n<64;n++)if(e==t[n])throw new TypeError(`Code table character "${e}" is repeated`)}}(e),e}function p(r,i,f){"function"==typeof r&&(f=r,r=void 0,i=void 0);const l=s(r),a=u(i,l);return function(r){let i;if(r instanceof n)i=r;else if(r instanceof e||t(r))i=o(r);else{if("function"!=typeof f)throw TypeError('"strEncode" is not function');i=f(String(r))}let h=Math.ceil(8*i.length/6),c=4*Math.ceil(i.length/3),u=new Array(c),s=0;for(let t=0;t<i.length;){let r=i[t++],e=i[t++],n=i[t++];u[s++]=r>>2,u[s++]=63&(r<<4|e>>4),u[s++]=63&(e<<2|n>>6),u[s++]=63&n}let p="";for(let t=0;t<u.length;t++){const r=u[t];p+=t>h-1?a:l[r]}return p}}function y(t,r,e){"function"==typeof t&&(e=t,t=void 0,r=void 0);const o=s(t),i=u(r,o),f=o.join("");let l,a="function"==typeof e?(l=e,function(){return l(this)}):null;return function(t){let r=t.length-function(t){let r=t.length,e=0;for(;r-- >0&&t.charAt(r)===i;)e++;return e}(t),e=r%4;if(1===e)throw new TypeError("The parameter is not a base64 string!");let o=new n(Math.floor(6*r/8)),l=0,h=0;const c=function(){return function(t){let r=f.indexOf(t);if(-1==r)throw new TypeError(`"${t}" not base64 char`);return r}(t.charAt(h++))};for(let t=r-e;h<t;){let[t,r,e,n]=[c(),c(),c(),c()];o[l++]=255&(t<<2|r>>4),o[l++]=255&(r<<4|e>>2),o[l++]=255&(e<<6|n)}if(e){let t;o[l++]=255&(c()<<2|(t=c())>>4),3===e&&(o[l++]=255&(t<<4|c()>>2))}return a&&(o.toString=a),o}}const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",g=p(h,c,l),d=y(h,c,a),A=p(w,c,l),T=y(w,c,a);export{h as BASE64_TABLE,w as BASE64_URL_TABLE,c as PAD,y as createDecode,p as createEncode,d as decode,T as decodeURL,g as encode,A as encodeURL,a as utf8Decode,l as utf8Encode};
